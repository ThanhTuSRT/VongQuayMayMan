<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¡ VÃ²ng quay may máº¯n lá»›p há»c</title>
  <style>
    body {
      display: flex;
      justify-content: space-around; /* vÃ²ng quay bÃªn trÃ¡i, nÃºt bÃªn pháº£i */
      align-items: center;
      height: 100vh;
      background: radial-gradient(circle, #fefefe, #b3e5fc);
      font-family: "Poppins", sans-serif;
      overflow: hidden;
    }

    /* ğŸ¯ Container vÃ²ng quay */
    .wheel-container {
      position: relative;
      width: 80vmin;   /* To gáº§n full mÃ n hÃ¬nh */
      height: 80vmin;
      min-width: 500px;
      min-height: 500px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    canvas {
      width: 100%;
      height: 100%;
      border: 12px solid #0288d1;
      border-radius: 50%;
      box-shadow: 0 0 30px rgba(0,0,0,0.3);
    }

    /* ğŸ”º MÅ©i70vmin;
      }
      #controls {
        flex-direction: row;
        gap: 10px;
        margin-top: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="wheel-container">
    <canvas id="wheel" width="800" height="800"></canvas>
    <div class="pointer"></div>
  </div>

  <div id="controls">
    <button id="spin">ğŸ¡ Quay!</button>
    <button id="shuffle">ğŸ” XÃ¡o trá»™n</button>
    <h2 id="result"></h2>
  </div>

  <script>
    // ğŸ“ Danh sÃ¡ch há»c sinh
    let students = [
      "LÃ½ Ngá»c Minh An","Tráº§n LÃª Má»¹ Anh","Nguyá»…n XuÃ¢n BÃ¡ch","Phan ThÃ¡i BÃ¬nh",
      "LÃª Báº£o ChÃ¢u","Nguyá»…n Há»“ Huyá»n ChÃ¢u","Nguyá»…n Thá»‹ HoÃ ng ChÃ¢u","Nguyá»…n Äá»©c DÅ©ng",
      "LÃ½ Thanh Duy","LÃ¢m Äáº·ng KhÃ¡nh ÄÄƒng","Nguyá»…n Trá»ng Äá»©c","Tráº§n Quang HÃ o",
      "Äáº·ng Tiáº¿n Huy","LÃª Thá»‹ Diá»…m Kiá»u","Huá»³nh Báº£o Lam","Nguyá»…n HoÃ ng Long",
      "Pháº¡m XuÃ¢n Mai","NgÃ´ Quang Minh","Nguyá»…n Quá»‘c Minh","TrÆ°Æ¡ng Tráº§n HÃ  My",
      "Nguyá»…n LÃª Gia Má»¹","Äáº·ng Thá»‹ Kim NgÃ¢n","Nguyá»…n Thiá»‡n NhÃ¢n","LÃª Ngá»c Tháº£o NhÆ°",
      "Nguyá»…n Thá»‹ Huá»³nh NhÆ°","Nguyá»…n VÄƒn Phi","Nguyá»…n Huá»³nh Yáº¿n PhÆ°Æ¡ng","Nguyá»…n Thá»‹ TrÃºc PhÆ°Æ¡ng",
      "Nguyá»…n NhÆ° Quá»³nh","Há»“ Äá»— Mai Thanh","Nguyá»…n Thá»‹ PhÆ°Æ¡ng Tháº£o","Nguyá»…n Tá»‘ng Anh ThÆ°",
      "Cao Huá»³nh Kim Tiá»n","Pháº¡m PhÃºc Tiáº¿n","Äáº·ng Thuá»³ TrÃ¢m","Nguyá»…n Báº£o Trá»ng",
      "Nguyá»…n Thanh TÃº","Nguyá»…n HÃ  KhÃ¡nh Tuáº¥n","Nguyá»…n Pháº¡m TrÃºc Vy","TrÆ°Æ¡ng LÃª TÆ°á»ng Vy",
      "Chung Triá»‡u Vá»¹","Nguyá»…n Thá»‹ Má»¹ XuyÃªn","Pháº¡m Thá»‹ NhÆ° Ã (2009)","Pháº¡m Thá»‹ NhÆ° Ã (2008)"
    ];

    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const size = canvas.width;
    const radius = size / 2;

    const colors = [
      "#ffb74d","#81c784","#64b5f6","#ba68c8","#e57373","#4db6ac",
      "#f06292","#aed581","#9575cd","#4dd0e1","#dce775","#a1887f",
      "#f48fb1","#7986cb","#ff8a65","#aed581","#4fc3f7","#81d4fa"
    ];

    // ğŸ”€ XÃ¡o trá»™n danh sÃ¡ch
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // âœ‚ï¸ Láº¥y 2 chá»¯ cuá»‘i cÃ¹ng
    function shortName(fullName) {
      const parts = fullName.trim().split(" ");
      return parts.slice(-2).join(" ");
    }

    // ğŸ¨ Váº½ vÃ²ng quay
    function drawWheel() {
      ctx.clearRect(0, 0, size, size);
      const arc = 2 * Math.PI / students.length;
      for (let i = 0; i < students.length; i++) {
        ctx.beginPath();
        ctx.fillStyle = colors[i % colors.length];
        ctx.moveTo(radius, radius);
        ctx.arc(radius, radius, radius, i * arc, (i + 1) * arc);
        ctx.lineTo(radius, radius);
        ctx.fill();

        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(i * arc + arc / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 22px sans-serif";
        ctx.fillText(shortName(students[i]), radius - 25, 8);
        ctx.restore();
      }
    }

    shuffleArray(students);
    drawWheel();

    let rotation = 0;
    let spinning = false;

    document.getElementById("spin").onclick = () => {
      if (spinning) return;
      spinning = true;
      document.getElementById("result").textContent = "";
      const spinAngle = Math.random() * 360 + 1440; // quay nhiá»u vÃ²ng hÆ¡n
      const duration = 4500;
      const start = performance.now();

      function animate(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        const easeOut = 1 - Math.pow(1 - progress, 3);
        const angle = rotation + spinAngle * easeOut;

        ctx.clearRect(0, 0, size, size);
        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate((angle * Math.PI) / 180);
        ctx.translate(-radius, -radius);
        drawWheel();
        ctx.restore();

        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          rotation = (rotation + spinAngle) % 360;
          const arc = 360 / students.length;
          const index = Math.floor((students.length - (rotation % 360) / arc) % students.length);
          document.getElementById("result").textContent = "ğŸ‰ Káº¿t quáº£: " + students[index] + "!";
          spinning = false;
        }
      }
      requestAnimationFrame(animate);
    };

    document.getElementById("shuffle").onclick = () => {
      if (spinning) return;
      shuffleArray(students);
      drawWheel();
      document.getElementById("result").textContent = "ğŸ” Danh sÃ¡ch Ä‘Ã£ Ä‘Æ°á»£c xÃ¡o trá»™n!";
    };
  </script>
</body>
</html>


